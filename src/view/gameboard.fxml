<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.layout.Pane?>
<StackPane prefHeight="800" prefWidth="585" stylesheets="@../resources/style/styles2.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.GameBoardController">

    <ImageView fitHeight="800" fitWidth="585" pickOnBounds="true" preserveRatio="false">
        <image>
            <Image url="@../resources/images/newbackground.jpg" />
        </image>
    </ImageView>

    <VBox alignment="TOP_CENTER" spacing="8">
        <padding>
            <Insets bottom="12" left="12" right="12" top="12" />
        </padding>

        <HBox alignment="CENTER" spacing="8">

            <HBox alignment="CENTER_LEFT" spacing="6" style="-fx-background-color: rgba(0, 0, 0, 0.6); -fx-background-radius: 12; -fx-padding: 6 10 6 10;">
                <Label text="BEST:" textFill="white">
                    <font>
                        <Font name="System Bold" size="10" />
                    </font>
                </Label>

                <StackPane maxHeight="40.0" maxWidth="60.0" minHeight="40.0" minWidth="60.0" style="-fx-background-color: linear-gradient(to bottom right, #4ECDC4 0%, #44A08D 100%); -fx-background-radius: 10; -fx-border-color: rgba(255, 255, 255, 0.3); -fx-border-width: 2; -fx-border-radius: 10;">
                    <Label fx:id="bestTileButton" text="264" textFill="#2D3142">
                        <font>
                            <Font name="System Bold" size="20" />
                        </font>
                    </Label>
                </StackPane>
            </HBox>

            <Region HBox.hgrow="ALWAYS" />

            <HBox alignment="CENTER" spacing="6" style="-fx-background-color: rgba(0, 0, 0, 0.6); -fx-background-radius: 12; -fx-padding: 6 12 6 12;">
                <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@../resources/images/47b32dcc-e6d2-4c10-896b-7eba72132749_removalai_preview.png" />
                    </image>
                </ImageView>
                <Label fx:id="diamondsLabel" text="9" textFill="white">
                    <font>
                        <Font name="System Bold" size="15" />
                    </font>
                </Label>
            </HBox>

            <Button fx:id="SettingsButton" onAction="#handleSettingsButton" style="-fx-background-color: rgba(0, 0, 0, 0.6); -fx-background-radius: 12; -fx-padding: 8; -fx-min-width: 36; -fx-min-height: 36;">
                <graphic>
                    <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@../resources/images/settingswhite.png" />
                        </image>
                    </ImageView>
                </graphic>
            </Button>

            <Button fx:id="pauseButton" onAction="#handlePauseButton" style="-fx-background-color: rgba(0, 0, 0, 0.6); -fx-background-radius: 12; -fx-padding: 8; -fx-min-width: 36; -fx-min-height: 36;">
                <graphic>
                    <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@../resources/images/pausewhite.png" />
                        </image>
                    </ImageView>
                </graphic>
            </Button>
        </HBox>

        <Pane fx:id="overlayPane" mouseTransparent="true"/>
        <GridPane fx:id="gameGrid" alignment="CENTER" hgap="5" vgap="5">

            <columnConstraints>
                <ColumnConstraints maxWidth="54" minWidth="54" prefWidth="54" />
                <ColumnConstraints maxWidth="54" minWidth="54" prefWidth="54" />
                <ColumnConstraints maxWidth="54" minWidth="54" prefWidth="54" />
                <ColumnConstraints maxWidth="54" minWidth="54" prefWidth="54" />
                <ColumnConstraints maxWidth="54" minWidth="54" prefWidth="54" />
            </columnConstraints>

            <rowConstraints>
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
                <RowConstraints maxHeight="54" minHeight="54" prefHeight="54" />
            </rowConstraints>

        </GridPane>
        <HBox alignment="CENTER" spacing="12">

            <VBox alignment="CENTER" spacing="3">
                <Button fx:id="undoButton" onAction="#handleUndoButton" style="-fx-background-color: rgba(0, 0, 0, 0.6);                        -fx-background-radius: 12;                        -fx-padding: 10;                        -fx-min-width: 44;                        -fx-min-height: 44;">
                    <graphic>
                        <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                            <image>
                                <Image url="@/resources/images/undowhite.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Label style="-fx-font-size: 9; -fx-font-weight: bold;" text="UNDO" textFill="white" />
            </VBox>

            <VBox alignment="CENTER" spacing="3">
                <Button fx:id="shuffleTwoButton" onAction="#handleShuffleTwoButton" style="-fx-background-color: rgba(0, 0, 0, 0.6);                        -fx-background-radius: 12;                        -fx-padding: 10;                        -fx-min-width: 44;                        -fx-min-height: 44;">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <image>
                                <Image url="@/resources/images/shufflewhite.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Label style="-fx-font-size: 9; -fx-font-weight: bold;" text="SHUFFLE 2" textFill="white" />
            </VBox>

            <VBox alignment="CENTER" spacing="3">
                <Button fx:id="shuffleAllButton" onAction="#handleShuffleAllButton" style="-fx-background-color: rgba(0, 0, 0, 0.6);                        -fx-background-radius: 12;                        -fx-padding: 10;                        -fx-min-width: 44;                        -fx-min-height: 44;">
                    <graphic>
                        <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                            <image>
                                <Image url="@/resources/images/shuffleallwhite.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Label style="-fx-font-size: 9; -fx-font-weight: bold;" text="SHUFFLE ALL" textFill="white" />
            </VBox>

        </HBox>

    </VBox>

</StackPane>
